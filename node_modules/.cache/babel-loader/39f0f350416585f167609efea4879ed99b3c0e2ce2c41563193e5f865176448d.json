{"ast":null,"code":"var _jsxFileName = \"/Users/star7/Desktop/joolang/frontend-service/src/pages/SearchPage/index.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Nav from \"../../components/Nav\";\nimport SearchFeed from \"./SearchFeed\";\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchPage = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [searchResults, setSearchResults] = useState([]);\n  const showSearch = true;\n  const useQuery = () => {\n    _s();\n    return new URLSearchParams(useLocation().search);\n  };\n  _s(useQuery, \"EuD9q2dZ34PfN/QO2OBhBzeMxmY=\", false, function () {\n    return [useLocation];\n  });\n  let query = useQuery();\n  const searchTerm = query.get(\"q\");\n  const tags = query.get(\"tags\");\n  useEffect(() => {\n    const fetchSearchItems = async () => {\n      try {\n        // 태그가 있을 경우, search-tags API 호출\n        const apiUrl = tags ? `/main/search-tags?feedType=PROJECT&tags=${encodeURIComponent(tags)}` : `/main/search-keyword?feedType=PROJECT&keyword=${encodeURIComponent(searchTerm)}`;\n        const response = await axios.get(apiUrl);\n        const filteredResults = response.data.filter(item => {\n          // 태그가 선택된 경우, 태그 필터링\n          return !tags || item.tags && item.tags.some(tag => tags.split(',').includes(tag));\n        });\n        setSearchResults(filteredResults); // 필터링된 결과 설정\n      } catch (error) {\n        console.error(\"Error fetching search items:\", error);\n      }\n    };\n    fetchSearchItems();\n  }, [searchTerm, tags]); // 검색어와 태그가 변경될 때마다 호출\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Nav, {\n      showSearch: showSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), searchResults.length > 0 ? /*#__PURE__*/_jsxDEV(SearchFeed, {\n      itemList: searchResults,\n      setSearchResults: setSearchResults\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(NoResults, {\n      children: \"\\uCC3E\\uACE0\\uC790\\uD558\\uB294 \\uAC80\\uC0C9\\uC5B4\\uC5D0 \\uB9DE\\uB294 \\uC544\\uC774\\uD15C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n_s2(SearchPage, \"lsB6FxWFYFLtWP+Q6PcC57+x7wM=\", true);\n_c = SearchPage;\nexport default SearchPage;\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: 300px;\n`;\n_c2 = Container;\nconst NoResults = styled.p`\n  font-size: 24px;\n  font-weight: bold;\n  color: #777;\n`;\n_c3 = NoResults;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SearchPage\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"NoResults\");","map":{"version":3,"names":["React","useState","useEffect","useLocation","Nav","SearchFeed","styled","axios","jsxDEV","_jsxDEV","SearchPage","_s2","_s","$RefreshSig$","searchResults","setSearchResults","showSearch","useQuery","URLSearchParams","search","query","searchTerm","get","tags","fetchSearchItems","apiUrl","encodeURIComponent","response","filteredResults","data","filter","item","some","tag","split","includes","error","console","Container","children","fileName","_jsxFileName","lineNumber","columnNumber","length","itemList","NoResults","_c","div","_c2","p","_c3","$RefreshReg$"],"sources":["/Users/star7/Desktop/joolang/frontend-service/src/pages/SearchPage/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Nav from \"../../components/Nav\"; \nimport SearchFeed from \"./SearchFeed\"; \nimport styled from 'styled-components';\nimport axios from 'axios';\n\nconst SearchPage = () => {\n    const [searchResults, setSearchResults] = useState([]);\n    const showSearch = true;\n\n    const useQuery = () => {\n        return new URLSearchParams(useLocation().search);\n    };\n\n    let query = useQuery();\n    const searchTerm = query.get(\"q\");\n    const tags = query.get(\"tags\");\n\n    useEffect(() => {\n        const fetchSearchItems = async () => {\n            try {\n                // 태그가 있을 경우, search-tags API 호출\n                const apiUrl = tags \n                    ? `/main/search-tags?feedType=PROJECT&tags=${encodeURIComponent(tags)}`\n                    : `/main/search-keyword?feedType=PROJECT&keyword=${encodeURIComponent(searchTerm)}`;\n                \n                const response = await axios.get(apiUrl);\n                const filteredResults = response.data.filter(item => {\n                    // 태그가 선택된 경우, 태그 필터링\n                    return !tags || (item.tags && item.tags.some(tag => tags.split(',').includes(tag)));\n                });\n                setSearchResults(filteredResults); // 필터링된 결과 설정\n            } catch (error) {\n                console.error(\"Error fetching search items:\", error);\n            }\n        };\n\n        fetchSearchItems();\n    }, [searchTerm, tags]); // 검색어와 태그가 변경될 때마다 호출\n\n    return (\n        <Container>\n            <Nav showSearch={showSearch} />\n            {searchResults.length > 0 ? (\n                <SearchFeed itemList={searchResults} setSearchResults={setSearchResults} />\n            ) : (\n                <NoResults>찾고자하는 검색어에 맞는 아이템이 없습니다.</NoResults>\n            )}\n        </Container>\n    );\n};\n\nexport default SearchPage;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: 300px;\n`;\n\nconst NoResults = styled.p`\n  font-size: 24px;\n  font-weight: bold;\n  color: #777;\n`;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}