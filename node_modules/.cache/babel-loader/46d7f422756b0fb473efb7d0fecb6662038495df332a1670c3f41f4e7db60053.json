{"ast":null,"code":"// frontend-service/src/services/api.js\nimport axios from 'axios';\nimport { isTokenExpired, refreshAccessToken } from './auth';\nconst apiClient = axios.create({\n  baseURL: 'http://localhost:8000',\n  //process.env.REACT_APP_API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  withCredentials: true\n});\napiClient.interceptors.request.use(async config => {\n  let accessToken = sessionStorage.getItem('accessToken');\n\n  // Refresh token if expired\n  if (isTokenExpired(accessToken)) {\n    accessToken = await refreshAccessToken();\n  }\n\n  // Add the valid token to the request headers\n  config.headers.Authorization = `Bearer ${accessToken}`;\n  return config;\n});\nexport default apiClient;","map":{"version":3,"names":["axios","isTokenExpired","refreshAccessToken","apiClient","create","baseURL","headers","withCredentials","interceptors","request","use","config","accessToken","sessionStorage","getItem","Authorization"],"sources":["/Users/pbh7080/Desktop/project/ITeaMoa/frontend-service/src/services/api.js"],"sourcesContent":["// frontend-service/src/services/api.js\nimport axios from 'axios';\nimport { isTokenExpired, refreshAccessToken } from './auth';\n\nconst apiClient = axios.create({\n    baseURL: 'http://localhost:8000', //process.env.REACT_APP_API_URL,\n    headers: {\n        'Content-Type': 'application/json',\n      },\n      withCredentials: true,\n});\n\napiClient.interceptors.request.use(async (config) => {\n    let accessToken = sessionStorage.getItem('accessToken');\n\n    // Refresh token if expired\n    if (isTokenExpired(accessToken)) {\n        accessToken = await refreshAccessToken();\n    }\n\n    // Add the valid token to the request headers\n    config.headers.Authorization = `Bearer ${accessToken}`;\n    return config;\n});\n\nexport default apiClient;\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,EAAEC,kBAAkB,QAAQ,QAAQ;AAE3D,MAAMC,SAAS,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC3BC,OAAO,EAAE,uBAAuB;EAAE;EAClCC,OAAO,EAAE;IACL,cAAc,EAAE;EAClB,CAAC;EACDC,eAAe,EAAE;AACvB,CAAC,CAAC;AAEFJ,SAAS,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,MAAOC,MAAM,IAAK;EACjD,IAAIC,WAAW,GAAGC,cAAc,CAACC,OAAO,CAAC,aAAa,CAAC;;EAEvD;EACA,IAAIb,cAAc,CAACW,WAAW,CAAC,EAAE;IAC7BA,WAAW,GAAG,MAAMV,kBAAkB,CAAC,CAAC;EAC5C;;EAEA;EACAS,MAAM,CAACL,OAAO,CAACS,aAAa,GAAG,UAAUH,WAAW,EAAE;EACtD,OAAOD,MAAM;AACjB,CAAC,CAAC;AAEF,eAAeR,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}