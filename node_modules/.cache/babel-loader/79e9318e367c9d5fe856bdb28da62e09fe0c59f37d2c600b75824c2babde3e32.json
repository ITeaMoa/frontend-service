{"ast":null,"code":"import React,{useEffect,useState}from'react';import styled from'styled-components';import Nav from\"../../components/Nav\";import axios from'axios';import ProjectDetail from'../../components/ProjectDetail';import ProjectListComponent from'../../components/ProjectListComponent';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MyPage=()=>{const[projects,setProjects]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[projectsPerPage]=useState(5);const[selectedList,setSelectedList]=useState('applied');const[selectedProject,setSelectedProject]=useState(null);const isLoggedIn=true;const showSearch=false;useEffect(()=>{const fetchProjects=async()=>{try{const response=await axios.get('data.json');if(response.data&&response.data.length>0){setProjects(response.data);}else{console.warn(\"No projects found in data.json\");setProjects([]);// 데이터가 없을 경우 빈 배열로 초기화\n}}catch(error){console.error(\"Error fetching the projects:\",error);}};fetchProjects();},[]);// 선택된 목록이 변경될 때 신청 프로젝트를 가져오는 새로운 useEffect\nuseEffect(()=>{const fetchAppliedProjects=async()=>{if(selectedList==='applied'){try{const response=await axios.get('http://localhost:8080/feeds/applications?userId=1111',{headers:{'Authorization':'API Key'// 실제 API 키로 교체하세요\n}});if(response.data&&response.data.length>0){setProjects(response.data);// 응답 데이터가 예상 형식이라고 가정\n}else{console.warn(\"No applied projects found\");setProjects([]);// 데이터가 없을 경우 빈 배열로 초기화\n}}catch(error){console.error(\"신청 프로젝트를 가져오는 중 오류 발생:\",error);}}};fetchAppliedProjects();},[selectedList]);// selectedList에 의존\nconst indexOfLastProject=currentPage*projectsPerPage;const indexOfFirstProject=indexOfLastProject-projectsPerPage;const currentProjects=projects.slice(indexOfFirstProject,indexOfLastProject);const paginate=pageNumber=>setCurrentPage(pageNumber);const handleListClick=listType=>{setSelectedList(listType);setCurrentPage(1);setSelectedProject(null);};const handleProjectClick=project=>{setSelectedProject(project);console.log(\"Selected project:\",project);};const handleBackToList=()=>{setSelectedProject(null);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Nav,{isLoggedIn:isLoggedIn,showSearch:showSearch}),/*#__PURE__*/_jsx(List,{children:/*#__PURE__*/_jsx(\"ul\",{children:['applied','interested','written','saved','closed','profile'].map(listType=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(StyledLink,{onClick:()=>handleListClick(listType),$isSelected:selectedList===listType,children:[listType==='applied'&&'신청 목록',listType==='interested'&&'관심 목록',listType==='written'&&'작성 목록',listType==='saved'&&'임시 저장',listType==='closed'&&'마감 목록',listType==='profile'&&'개인 정보']})},listType))})}),selectedProject?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ProjectDetail,{project:selectedProject,onBack:handleBackToList})}):/*#__PURE__*/_jsx(ProjectListComponent,{selectedList:selectedList,currentProjects:currentProjects,handleProjectClick:handleProjectClick,projectsPerPage:projectsPerPage,totalProjects:projects.length,paginate:paginate})]});};export default MyPage;const Container=styled.div`\n margin-top: 20vh;\n min-height: calc(100vh - 250px);\n display: flex;\n padding-top: 30px;\n flex-direction: column;\n align-items: center;\n z-index:1000;\n justify-content: center;\n`;const List=styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow-x: auto; // Allow horizontal scrolling if needed\n  white-space: nowrap; // Prevent items from wrapping\n  max-width: 100%; // Ensure the container doesn't exceed the screen width\n  padding: 20px;\n\n  ul {\n    list-style: none;\n    display: flex;\n    gap: 20px;\n    padding: 0;\n    margin: 0;\n  }\n\n  @media (max-width: 768px) {\n    ul {\n      gap: 10px;\n    }\n  }\n`;const StyledLink=styled.a`\n  cursor: pointer;\n  color: ${props=>props.$isSelected?'white':'#0A8ED9'}; \n  background-color: ${props=>props.$isSelected?'rgba(160, 218, 251)':'white'}; \n  font-weight: ${props=>props.$isSelected?'bold':'normal'}; \n  border: 2px solid rgba(160, 218, 251); \n  border-radius: 30px 30px 1px 30px; \n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1); \n  padding: 10px 25px; \n  margin-right: 20px; \n  text-decoration: none; \n\n  &:hover {\n    background-color: rgba(160, 218, 251); \n    color: white; \n  }\n`;","map":{"version":3,"names":["React","useEffect","useState","styled","Nav","axios","ProjectDetail","ProjectListComponent","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyPage","projects","setProjects","currentPage","setCurrentPage","projectsPerPage","selectedList","setSelectedList","selectedProject","setSelectedProject","isLoggedIn","showSearch","fetchProjects","response","get","data","length","console","warn","error","fetchAppliedProjects","headers","indexOfLastProject","indexOfFirstProject","currentProjects","slice","paginate","pageNumber","handleListClick","listType","handleProjectClick","project","log","handleBackToList","Container","children","List","map","StyledLink","onClick","$isSelected","onBack","totalProjects","div","a","props"],"sources":["/Users/pbh7080/Desktop/project/ITeaMoa/frontend-service/src/pages/MyPage/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport Nav from \"../../components/Nav\";\nimport axios from 'axios';\nimport ProjectDetail from '../../components/ProjectDetail';\nimport ProjectListComponent from '../../components/ProjectListComponent';\n\n\nconst MyPage = () => {\n  const [projects, setProjects] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [projectsPerPage] = useState(5); \n  const [selectedList, setSelectedList] = useState('applied');\n  const [selectedProject, setSelectedProject] = useState(null);\n  const isLoggedIn = true; \n  const showSearch = false;\n\n  useEffect(() => {\n    const fetchProjects = async () => {\n      try {\n        const response = await axios.get('data.json'); \n        if (response.data && response.data.length > 0) {\n          setProjects(response.data);\n        } else {\n          console.warn(\"No projects found in data.json\");\n          setProjects([]); // 데이터가 없을 경우 빈 배열로 초기화\n        }\n      } catch (error) {\n        console.error(\"Error fetching the projects:\", error);\n      }\n    };\n\n    fetchProjects();\n  }, []);\n\n  // 선택된 목록이 변경될 때 신청 프로젝트를 가져오는 새로운 useEffect\n  useEffect(() => {\n    const fetchAppliedProjects = async () => {\n      if (selectedList === 'applied') {\n        try {\n          const response = await axios.get('http://localhost:8080/feeds/applications?userId=1111', {\n            headers: {\n              'Authorization': 'API Key' // 실제 API 키로 교체하세요\n            }\n          });\n          if (response.data && response.data.length > 0) {\n            setProjects(response.data); // 응답 데이터가 예상 형식이라고 가정\n          } else {\n            console.warn(\"No applied projects found\");\n            setProjects([]); // 데이터가 없을 경우 빈 배열로 초기화\n          }\n        } catch (error) {\n          console.error(\"신청 프로젝트를 가져오는 중 오류 발생:\", error);\n        }\n      }\n    };\n\n    fetchAppliedProjects();\n  }, [selectedList]); // selectedList에 의존\n\n\n  const indexOfLastProject = currentPage * projectsPerPage;\n  const indexOfFirstProject = indexOfLastProject - projectsPerPage;\n  const currentProjects = projects.slice(indexOfFirstProject, indexOfLastProject);\n\n  const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n  const handleListClick = (listType) => {\n    setSelectedList(listType);\n    setCurrentPage(1); \n    setSelectedProject(null);\n  };\n\n\n  const handleProjectClick = (project) => {\n    setSelectedProject(project);\n    console.log(\"Selected project:\", project);\n  };\n  \n\n  const handleBackToList = () => {\n    setSelectedProject(null);\n  };\n\n\n  return (\n    <Container>\n      <Nav isLoggedIn={isLoggedIn} showSearch={showSearch}/>\n\n          <List>\n            <ul>\n              {['applied', 'interested', 'written', 'saved', 'closed', 'profile'].map((listType) => (\n                <li key={listType}>\n                  <StyledLink \n                    onClick={() => handleListClick(listType)} \n                    $isSelected={selectedList === listType}\n                  >\n                    {listType === 'applied' && '신청 목록'}\n                    {listType === 'interested' && '관심 목록'}\n                    {listType === 'written' && '작성 목록'}\n                    {listType === 'saved' && '임시 저장'}\n                    {listType === 'closed' && '마감 목록'}\n                    {listType === 'profile' && '개인 정보'}\n                  </StyledLink>\n                </li>\n              ))}\n            </ul>\n          </List>\n\n            {/* 선택된 프로젝트가 있을 때 세부정보 보여줌 */}\n      {selectedProject ? (\n        <>\n         <ProjectDetail project={selectedProject} onBack={handleBackToList} />\n\n        </>\n      ) : (\n        <ProjectListComponent \n          selectedList={selectedList}\n          currentProjects={currentProjects}\n          handleProjectClick={handleProjectClick}\n          projectsPerPage={projectsPerPage}\n          totalProjects={projects.length}\n          paginate={paginate}\n        />\n      )}\n    </Container>\n  );\n};\n\nexport default MyPage;\n\nconst Container = styled.div`\n margin-top: 20vh;\n min-height: calc(100vh - 250px);\n display: flex;\n padding-top: 30px;\n flex-direction: column;\n align-items: center;\n z-index:1000;\n justify-content: center;\n`;\n\n\nconst List = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow-x: auto; // Allow horizontal scrolling if needed\n  white-space: nowrap; // Prevent items from wrapping\n  max-width: 100%; // Ensure the container doesn't exceed the screen width\n  padding: 20px;\n\n  ul {\n    list-style: none;\n    display: flex;\n    gap: 20px;\n    padding: 0;\n    margin: 0;\n  }\n\n  @media (max-width: 768px) {\n    ul {\n      gap: 10px;\n    }\n  }\n`;\n\n\nconst StyledLink = styled.a`\n  cursor: pointer;\n  color: ${(props) => (props.$isSelected ? 'white' : '#0A8ED9')}; \n  background-color: ${(props) => (props.$isSelected ? 'rgba(160, 218, 251)' : 'white')}; \n  font-weight: ${(props) => (props.$isSelected ? 'bold' : 'normal')}; \n  border: 2px solid rgba(160, 218, 251); \n  border-radius: 30px 30px 1px 30px; \n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1); \n  padding: 10px 25px; \n  margin-right: 20px; \n  text-decoration: none; \n\n  &:hover {\n    background-color: rgba(160, 218, 251); \n    color: white; \n  }\n`;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}